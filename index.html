<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPX dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="/Coffee.png" type="image/png" sizes="48x48">
</head>
<body>
    <!-- 사이드바 -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>CPX</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="index.html" class="sidebar-btn active">
                <span class="icon">📝</span>
                <span class="text">시험</span>
            </a>
            <a href="OSCE.html" class="sidebar-btn">
                <span class="icon">🏥</span>
                <span class="text">OSCE</span>
            </a>
            <a href="admin.html" class="sidebar-btn" id="adminBtn">
                <span class="icon">⚙️</span>
                <span class="text">관리</span>
            </a>
            <a href="stats.html" class="sidebar-btn">
                <span class="icon">📊</span>
                <span class="text">통계</span>
            </a>
        </nav>
    </div>

    <div class="main-content">
        <div class="container">
            <!-- 헤더 -->
            <header class="header">
                <h1>CPX 시험</h1>
                <div class="timer" id="timer">12:00</div>
            </header>

        <!-- 타이머 컨트롤 -->
        <div class="timer-controls">
            <button id="startBtn" class="btn btn-primary">시작</button>
            <button id="pauseBtn" class="btn btn-secondary" disabled>일시정지</button>
            <button id="resetBtn" class="btn btn-secondary">리셋</button>
            <button id="evaluateBtn" class="btn btn-secondary"><span class="spinner" aria-hidden="true"></span><span class="btn-text">평가</span></button>
            <button id="finishBtn" class="btn btn-danger">종료/기록</button>
        </div>

        <!-- 증례 선택 -->
        <div class="case-selection">
            <label for="caseSelect" class="label">증례 선택</label>
            <select id="caseSelect" class="select">
                <option value="">증례를 선택하세요</option>
            </select>
        </div>

        <!-- 시험 기록 -->
        <div class="session-notes">
            <label for="sessionNotes" class="label">시험 기록 (선택사항)</label>
            <textarea id="sessionNotes" class="notes-textarea" placeholder="시험 내용을 기록해주세요. 예: 다뇨 남자 50&#10;2025.09.16 화 오후 10:26 ・ 4분 30초&#10;홍길동&#10;&#10;참석자 1 00:11&#10;안녕하세요. 학생 의사 홍길동입니다..."></textarea>
        </div>

        <!-- 공통 체크리스트 -->
        <div class="checklist-section">
            <h2 style="font-size: 1rem; margin-bottom: 12px;">공통 체크리스트</h2>
            <div class="checklist-actions" style="margin-bottom: 8px; display: flex; gap: 8px;">
                <button id="checkAllBtn" class="btn btn-secondary">전체 체크</button>
                <button id="uncheckAllBtn" class="btn btn-secondary">전체 해제</button>
            </div>
            <div class="checklist-grid" id="commonChecklist">
                <!-- O L D Co Ex C A F E 외 과 약 사 가 여 -->
            </div>
        </div>

        <!-- 증례별 체크리스트 -->
        <div class="checklist-section" id="caseChecklistSection" style="display: none;">
            <h2 style="font-size: 1rem; margin-bottom: 12px;">증례별 체크리스트</h2>
            <div class="checklist-actions" style="margin-bottom: 8px; display: flex; gap: 8px;">
                <button id="checkAllCaseBtn" class="btn btn-secondary">전체 체크</button>
                <button id="uncheckAllCaseBtn" class="btn btn-secondary">전체 해제</button>
            </div>
            
            <!-- 문진 체크리스트 -->
            <div class="sub-checklist">
                <h3>문진</h3>
                <div class="interview-checklist" id="interviewChecklist">
                    <!-- 한 줄에 하나씩 체크리스트 -->
                </div>
            </div>

            <!-- P/E 체크리스트 -->
            <div class="sub-checklist">
                <h3>P/E</h3>
                <div class="checklist-grid" id="peChecklist">
                    <!-- 버튼 형식 -->
                </div>
            </div>
        </div>

        <!-- 감별진단 및 Plan -->
        <div class="checklist-section" id="ddxPlanSection" style="display: none;">
            <h2 style="font-size: 1rem; margin-bottom: 12px;">감별진단 및 Plan</h2>
            
            <!-- 감별진단 -->
            <div class="sub-checklist">
                <h3>감별진단</h3>
                <div class="ddx-list" id="ddxList">
                    <!-- 감별진단 목록 -->
                </div>
            </div>

            <!-- Plan -->
            <div class="sub-checklist">
                <h3>Plan</h3>
                <div class="plan-list" id="planList">
                    <!-- Plan 목록 -->
                </div>
            </div>
        </div>

        </div>
    </div>

    <!-- 점수 입력 모달 -->
    <div id="scoreModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>시험 완료</h3>
            </div>
            <div class="modal-body">
                <p>시험을 완료하셨습니다. 주관적인 평가 점수를 입력해주세요.</p>
                <div class="score-input-group">
                    <label for="scoreInput" class="score-label">점수 (0-100점)</label>
                    <input type="number" id="scoreInput" class="score-input" min="0" max="100" placeholder="점수를 입력하세요">
                    <div class="score-slider-container">
                        <input type="range" id="scoreSlider" class="score-slider" min="0" max="100" value="0">
                        <div class="score-display" id="scoreDisplay">0점</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveScoreBtn" class="btn btn-primary">저장</button>
                <button id="cancelScoreBtn" class="btn btn-secondary">취소</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
